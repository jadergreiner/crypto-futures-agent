â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              QUICK REFERENCE GUIDE
                    OperaÃ§Ã£o do Sistema de GestÃ£o de PosiÃ§Ãµes
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ”´ STATUS CRÃTICO ATUAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Margem: $6.00 (Margem esgotada)
  âœ NÃƒO ABRIR NOVAS POSIÃ‡Ã•ES
  âœ SÃ“ operaÃ§Ãµes de leitura/anÃ¡lise
  âœ Aguardar recuperaÃ§Ã£o para $50+


ğŸŸ¢ VERIFICAÃ‡Ã•ES DE SEGURANÃ‡A (SEM RISCO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Ver TODAS as posiÃ§Ãµes abertas:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   $ python scripts/manage_positions.py --list

   Resultado esperado:
   âœ“ Trade IDs 5, 6, 7 listados
   âœ“ Status: ABERTA
   âœ“ SL/TP prices exibidos


2. Ver Trade ID 7 (ESPECÃFICO):
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   $ python verify_real_orders.py

   Resultado esperado:
   âœ“ Binance Order ID: 5412778331
   âœ“ Binance SL Algo ID: 3000000742992546
   âœ“ Binance TP Algo ID: 3000000742992581


3. Snapshot atual no banco (SQL):
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   $ sqlite3 db/trading.db

   sqlite> SELECT trade_id, symbol, direcao, entry_price,
             binance_order_id, binance_sl_order_id,
             binance_tp_order_id, status
           FROM trade_log WHERE status='ABERTA';

   Resultado esperado: IDs 5, 6, 7 com todos os 3 order IDs


ğŸŸ¡ OPERAÃ‡Ã•ES DE GESTÃƒO (QUANDO MARGEM > $50)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A. REALIZAR PARCIAL (ex: 50% de lucro)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   $ python scripts/manage_positions.py --partial --id 7 --pct 50

   O que acontece:
   1. Cancela SL antigo (Algo ID: ...546)
   2. Cancela TP antigo (Algo ID: ...581)
   3. Executa SELL de 50% da quantidade
   4. Cria novo SL com 50% restante
   5. Cria novo TP com 50% restante
   6. Registra em trade_partial_exits


B. MOVER SL PARA BREAKEVEN
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   $ python scripts/manage_positions.py --breakeven --id 7

   O que acontece:
   1. Cancela SL antigo
   2. Cria novo SL @ entry_price
   3. TP permanece igual
   4. Resultado: Sem risco, apenas upside


C. FECHAR POSIÃ‡ÃƒO INTEIRA
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   $ python scripts/manage_positions.py --close-all --id 7

   O que acontece:
   1. Cancela SL (Algo ID: ...546)
   2. Cancela TP (Algo ID: ...581)
   3. Executa SELL de 100%
   4. Registra saÃ­da no banco
   5. Status: FECHADO


ğŸŸ¢ MONITORAMENTO CONTÃNUO (BACKGROUND)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Modo Teste (uma vez):
   $ python scripts/monitor_and_manage_positions.py --once

   Resultado:
   âœ“ Lista posiÃ§Ãµes abertas
   âœ“ Tempo aberto de cada
   âœ“ Aviso se > 2h aberta
   âœ“ Risco de liquidaÃ§Ã£o %


Modo ContÃ­nuo (toda a noite):
   $ python scripts/monitor_and_manage_positions.py --interval 60

   Resultado:
   âœ“ Executa scan a cada 60 seg
   âœ“ Registra em logs/monitor_
   âœ“ Ctrl+C para parar
   âœ“ ComeÃ§a em novo terminal


ğŸ“Š ABRIR NOVA POSIÃ‡ÃƒO (QUANDO MARGEM OK)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   $ python scripts/execute_1dollar_trade.py --symbol SOLUSDT --direction LONG

   O que acontece:
   1. Verifica balance ($50+? OK/PARAR)
   2. Busca preÃ§o atual de SOLUSDT
   3. Calcula quantidade baseado em $1 margem Ã— 10x
   4. Executa MARKET order (entrada)
   5. Cria STOP_MARKET order (SL) â†’ Binance
   6. Cria TAKE_PROFIT_MARKET order (TP) â†’ Binance
   7. Salva todos os 3 IDs no banco
   8. Status: Trade ID 8 ABERTA

   IMPORTANTE:
   âœ“ Sempre 3 ordens (1 MARKET + 1 SL + 1 TP)
   âœ“ Binance gerencia SL/TP 24/7
   âœ“ No monitor local necessÃ¡rio (backup apenas)


ğŸ”§ MANUTENÃ‡ÃƒO DO SCHEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Criar tabela trade_partial_exits (1 vez apenas):
   $ python schema_update.py

   Resultado:
   âœ“ Tabela criada se nÃ£o existir
   âœ“ 11 columns incluÃ­das
   âœ“ Ãndices criados


Verificar schema:
   $ sqlite3 db/trading.db .schema trade_partial_exits


ğŸ“‹ ARQUIVOS PRINCIPAIS (REFERÃŠNCIA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

execute_1dollar_trade.py
   â”œâ”€ Abre 1 posiÃ§Ã£o
   â”œâ”€ Cria 3 ordens Binance (MARKET + SL + TP)
   â””â”€ Salva IDs no banco

manage_positions.py
   â”œâ”€ --list (ver todas)
   â”œâ”€ --partial (realizaÃ§Ã£o parcial)
   â”œâ”€ --breakeven (SL em entrada)
   â””â”€ --close-all (fechar tudo)

monitor_and_manage_positions.py
   â”œâ”€ --once (teste)
   â”œâ”€ --interval 60 (contÃ­nuo)
   â””â”€ Logs health check

schema_update.py
   â””â”€ Criar trade_partial_exits (1 vez)

database (trade_log):
   â”œâ”€ trade_id
   â”œâ”€ symbol, direcao, entry_price
   â”œâ”€ binance_order_id (MARKET)
   â”œâ”€ binance_sl_order_id (SL Algo)
   â”œâ”€ binance_tp_order_id (TP Algo)
   â””â”€ status (ABERTA/FECHADO)

database (trade_partial_exits):
   â”œâ”€ partial_id
   â”œâ”€ trade_id (link)
   â”œâ”€ partial_number (1Âº, 2Âº, etc)
   â”œâ”€ quantity_closed / remaining
   â”œâ”€ exit_price, exit_time
   â”œâ”€ binance_sl_order_id_new (depois parcial)
   â”œâ”€ binance_tp_order_id_new (depois parcial)
   â””â”€ reason (MANUAL, TP_TRIGGER, etc)


âš ï¸  CHECKLIST DE OPERAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES DE QUALQUER OPERAÃ‡ÃƒO:
  â˜ Verificar margem: $ python -c "print('$X.XX')"
  â˜ Se margem < $50: PARAR, SÃ“ LEITURA
  â˜ Se margem > $50: Pode operar conforme abaixo

ANTES DE ABRIR POSIÃ‡ÃƒO:
  â˜ Listar existentes: manage_positions.py --list
  â˜ Se jÃ¡ 3 abertas: Fechar 1 antes
  â˜ Confirmar sÃ­mbolo (ex: SOLUSDT, NEOUSDT)
  â˜ Confirmar direÃ§Ã£o (LONG ou SHORT)

DEPOIS DE ABRIR:
  â˜ Executar command (10 seg)
  â˜ Verificar 3 IDs (MARKET + SL + TP)
  â˜ Confirmar BD (verify_real_orders.py)
  â˜ Notar Trade ID para futuro

ADMINSTRAÃ‡ÃƒO DIÃRIA:
  â˜ Rodar monitor --once (leitura, sem aÃ§Ã£o)
  â˜ Ver quantas parciais realizadas
  â˜ Checar PnL em tempo real
  â˜ Se > 2h aberta + SL ativo = pode esperar
  â˜ Se lucro visÃ­vel + metade aberta = considerar mais parcial


ğŸ¯ ESTRATÃ‰GIA DE OPERAÃ‡ÃƒO (3 FASES)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FASE 1: ABERTURA (Execute â†’ 10 seg)
     Binance Order ID âœ…
     SL Algo ID âœ…
     TP Algo ID âœ…

FASE 2: GESTÃƒO (Quando quiser)
     â”œâ”€ Se lucro 50% â†’ Realiza 50%, ficam 50% abertos
     â”œâ”€ Se lucro 30% + chÃ£o â†’ Breakeven SL, espera TP
     â””â”€ Se SL/TP trigaram â†’ AutomÃ¡tico, sem aÃ§Ã£o

FASE 3: MONITORAMENTO (Opcional, para logging)
     â”œâ”€ Detecta SL/TP trigadas
     â”œâ”€ Registra PnL
     â””â”€ Avisa timeout (2h)


ğŸ’¡ DICAS PRÃTICAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Sempre 3 ordens simultÃ¢neas (entrada + saÃ­da dupla)
2. Binance gerencia, nÃ£o depender de monitor
3. Parciais toda hora (nÃ£o preso numa)
4. Capital Ã© sagrado - $50+ antes de testar
5. BD Ã© fonte de verdade - sempre verificar
6. Logs salvos em logs/ para auditoria
7. Cada parcial = nova entrada na trade_partial_exits


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ HOJE: PARADO (margem $6)
ğŸŸ¡ AMANHÃƒ: ANÃLISE (testar scripts, sem capital)
ğŸŸ¢ QUANDO MARGEM > $50: OPERAÃ‡ÃƒO NORMAL

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
